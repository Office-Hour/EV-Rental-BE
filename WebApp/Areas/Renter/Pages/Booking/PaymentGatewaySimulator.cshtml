@page
@using WebApp.Services
@model WebApp.Areas.Renter.Pages.Booking.PaymentGatewaySimulatorModel
@{
    ViewData["Title"] = "VNPay Gateway Simulator";
}

<link rel="stylesheet" href="~/css/Index.css" />
<link rel="stylesheet" href="~/css/payment-gateway.css" asp-append-version="true" />

<section class="payment-gateway-section">
    <div class="container" style="max-width: 700px;">
        <div class="gateway-card">
            <!-- Header -->
            <div class="gateway-header">
                <div class="vnpay-logo">
                    <span class="material-icons">account_balance</span>
                    <h2>VNPay Gateway</h2>
                    <span class="badge badge-simulator">SIMULATOR</span>
                </div>
                <p class="text-muted">Sandbox Payment Gateway for Testing</p>
            </div>

            <!-- Payment Info -->
            <div class="payment-info-box">
                <h3>Thông Tin Thanh Toán</h3>
                <div class="info-grid">
                    <div class="info-item">
                        <span class="label">Mã đặt chỗ:</span>
                        <span class="value">@Model.BookingId.ToString().Substring(0, 8).ToUpper()</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Số tiền:</span>
                        <span class="value highlight">@Model.Amount.ToString("N0") VNĐ</span>
                    </div>
                    <div class="info-item">
                        <span class="label">Mã giao dịch:</span>
                        <span class="value code">@Model.TxnRef</span>
                    </div>
                </div>
            </div>

            <!-- Simulation Form -->
            <form method="post">
                <input type="hidden" asp-for="BookingId" />
                <input type="hidden" asp-for="Amount" />
                <input type="hidden" asp-for="TxnRef" />

                <div class="simulation-options">
                    <h3>Chọn Kết Quả Giả Lập</h3>
                    <p class="text-muted small mb-3">
                        <span class="material-icons" style="font-size: 16px; vertical-align: middle;">info</span>
                        Đây là môi trường sandbox. Bạn có thể chọn kết quả thanh toán để test các trường hợp khác nhau.
                    </p>

                    <div class="radio-group">
                        <label class="radio-option success">
                            <input type="radio" asp-for="SimulationResult" value="Success" checked />
                            <div class="radio-content">
                                <span class="material-icons">check_circle</span>
                                <div>
                                    <strong>Thành Công</strong>
                                    <p>Thanh toán được xử lý thành công</p>
                                </div>
                            </div>
                        </label>

                        <label class="radio-option error">
                            <input type="radio" asp-for="SimulationResult" value="InsufficientBalance" />
                            <div class="radio-content">
                                <span class="material-icons">account_balance_wallet</span>
                                <div>
                                    <strong>Số Dư Không Đủ</strong>
                                    <p>Tài khoản không đủ số dư để thanh toán</p>
                                </div>
                            </div>
                        </label>

                        <label class="radio-option error">
                            <input type="radio" asp-for="SimulationResult" value="InvalidCard" />
                            <div class="radio-content">
                                <span class="material-icons">credit_card_off</span>
                                <div>
                                    <strong>Thẻ Không Hợp Lệ</strong>
                                    <p>Thông tin thẻ không đúng hoặc thẻ bị khóa</p>
                                </div>
                            </div>
                        </label>

                        <label class="radio-option error">
                            <input type="radio" asp-for="SimulationResult" value="Timeout" />
                            <div class="radio-content">
                                <span class="material-icons">timer_off</span>
                                <div>
                                    <strong>Timeout</strong>
                                    <p>Giao dịch quá thời gian cho phép</p>
                                </div>
                            </div>
                        </label>

                        <label class="radio-option warning">
                            <input type="radio" asp-for="SimulationResult" value="UserCancelled" />
                            <div class="radio-content">
                                <span class="material-icons">cancel</span>
                                <div>
                                    <strong>Người Dùng Hủy</strong>
                                    <p>Bạn đã hủy giao dịch</p>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Security Notice -->
                <div class="security-notice">
                    <span class="material-icons">lock</span>
                    <div>
                        <strong>Giao dịch được mã hóa</strong>
                        <p class="mb-0">Thông tin thanh toán của bạn được bảo vệ bởi SSL/TLS</p>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="button-group">
                    <button type="submit" class="btn btn-primary">
                        <span class="material-icons">payment</span>
                        Xác Nhận Thanh Toán
                    </button>
                    <a asp-page="/RenterProfile" asp-area="Renter" class="btn btn-secondary">
                        <span class="material-icons">close</span>
                        Hủy Giao Dịch
                    </a>
                </div>
            </form>
        </div>
    </div>
</section>
